<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mi Perfil - Vista Voyages</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Estilos globales -->
    <link rel="stylesheet" href="CSS/variables.css">
    <link rel="stylesheet" href="CSS/style.css">

    <!-- Estilos del panel -->
    <link rel="stylesheet" href="CSS/perfil.css">
    <link rel="stylesheet" href="CSS/wallet.css">

    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body class="perfil-body">
    <!-- NAVBAR -->
    <header class="header">
        <nav class="nav glass" id="mainNav">
            <div class="nav__brand">
                <img src="imagenes/logosinfondo.png" alt="Vista Voyages" class="nav__logo">
                <span class="nav__title">Vista Voyages</span>
            </div>
            <ul class="nav__links" data-nav="links">
                <!-- Se rellena dinámicamente con navbar.js -->
            </ul>
        </nav>

    <!-- PROTECCIÓN DE ACCESO -->
    <script>
        const usr = JSON.parse(localStorage.getItem("usuario") || "null");
        if (!usr) window.location.href = "LogIn.html";
    </script>


    <main class="perfil-container">

        <!-- HEADER -->
        <section class="perfil-header glass">
            <div>
                <h1>Mi Perfil</h1>
                <p>Bienvenido(a), <strong id="perfilNombre"></strong></p>
            </div>

            <button id="btnEditarPerfil" class="btn-azul">
                <i class="fa-solid fa-user-pen"></i> Editar Perfil
            </button>
        </section>


        <!-- PANEL DE CONTENIDO -->
        <section class="perfil-secciones">

            <!-- Información del usuario -->
            <div class="perfil-card glass">
                <h2><i class="fa-solid fa-user"></i> Información personal</h2>

                <div class="perfil-info info-bloque">
                    <p><strong>Nombre:</strong> <span id="perfilNombreComp"></span></p>
                    <p><strong>Correo:</strong> <span id="perfilCorreo"></span></p>
                    <p><strong>Teléfono:</strong> <span id="perfilTelefono"></span></p>
                </div>

                <button id="btnEditarInfo" class="btn-azul">Editar información</button>
                <button id="btnCambiarPassword" class="btn-azul">Cambiar contraseña</button>
            </div>


            <!-- Wallet -->
            <div class="perfil-card glass">
                <h2><i class="fa-solid fa-wallet"></i> My Wallet</h2>

                <div id="walletLista" class="wallet-container"></div>

                <button id="btnAgregarTarjeta" class="btn-azul">
                    <i class="fa-solid fa-circle-plus"></i> Añadir tarjeta
                </button>
            </div>


            <!-- Mis reseñas -->
            <div class="perfil-card glass">
                <h2><i class="fa-solid fa-star"></i> Mis reseñas</h2>
                <p>Aquí puedes ver todas tus reseñas creadas.</p>

                <button id="btnVerReseñas" class="btn-azul">Ver reseñas</button>
            </div>


            <!-- Historial de vuelos -->
            <div class="perfil-card glass">
                <h2><i class="fa-solid fa-plane"></i> Historial de vuelos</h2>
                <p>Próximamente podrás ver tus viajes.</p>

                <button id="btnHistorial" class="btn-azul">Ver historial</button>
            </div>
            <div class="perfil-card glass">
                <h2><i class="fa-solid fa-location-dot"></i> Direcciones de Envío</h2>
                <p>Añade una o varias direcciones dentro de la República Mexicana.</p>

                <div id="listaDirecciones" class="direcciones-container"></div>

                <button id="btnAgregarDireccion" class="btn-azul mt-2">
                    <i class="fa-solid fa-circle-plus"></i> Añadir dirección
                </button>
            </div>
        </section>
    </main>


    <!-- ==========================================================
            MODAL — Editar información personal
    ========================================================== -->
    <div class="modal" id="modalEditarInfo">
        <div class="modal-content glass">
            <h3>Editar información personal</h3>

            <input id="inputNombre" class="input-modal" placeholder="Nombre completo">
            <input id="inputCorreo" class="input-modal" placeholder="Correo electrónico">
            <input id="inputTelefono" class="input-modal" placeholder="Teléfono">

            <button id="guardarInfo" class="btn-azul">Guardar</button>
            <button class="btn-cerrar" data-close>Cancelar</button>
        </div>
    </div>


    <!-- ==========================================================
            MODAL — Cambiar contraseña
    ========================================================== -->
    <div class="modal" id="modalPassword">
        <div class="modal-content glass">
            <h3>Cambiar contraseña</h3>

            <input id="passActual" class="input-modal" type="password" placeholder="Contraseña actual">
            <input id="passNueva" class="input-modal" type="password" placeholder="Nueva contraseña">
            <input id="passConfirm" class="input-modal" type="password" placeholder="Confirmar contraseña">

            <button id="guardarPassword" class="btn-azul">Guardar</button>
            <button class="btn-cerrar" data-close>Cerrar</button>
        </div>
    </div>


    <!-- ==========================================================
            MODAL — Ver reseñas del usuario
    ========================================================== -->
    <div class="modal" id="modalReseñas">
        <div class="modal-content glass">
            <h3>Mis reseñas</h3>

            <div id="listaReseñasUser" class="lista-reseñas-modal"></div>

            <button class="btn-cerrar" data-close>Cerrar</button>
        </div>
    </div>


    <!-- ==========================================================
            MODAL — Historial
    ========================================================== -->
    <div class="modal" id="modalHistorial">
        <div class="modal-content glass">
            <h3>Historial de vuelos</h3>
            <p>Aún no implementado.</p>
            <button class="btn-cerrar" data-close>Cerrar</button>
        </div>
    </div>
    <!-- ==========================================================
            MODAL — Añadir dirección
    ========================================================== -->
    <div class="modal" id="modalAgregarDireccion">
        <div class="modal-content glass">
            <h3>Añadir dirección</h3>

            <input id="dirCalle" class="input-modal" placeholder="Calle y número">
            <input id="dirCiudad" class="input-modal" placeholder="Ciudad">
            <input id="editDirEstado" class="input-modal">
            <input id="dirCP" class="input-modal" placeholder="Código Postal">

            <button id="guardarDireccion" class="btn-azul">Guardar</button>
            <button class="btn-cerrar" data-close>Cancelar</button>
        </div>
    </div>
    <!-- ==========================================================
            MODAL — Editar dirección
    ========================================================== -->
    <div class="modal" id="modalEditarDireccion">
        <div class="modal-content glass">
            <h3>Editar dirección</h3>

            <input id="editDirCalle" class="input-modal">
            <input id="editDirCiudad" class="input-modal">
            <select id="editDirEstado" class="input-modal"></select>
            <input id="editDirCP" class="input-modal">

            <input id="editDirID" type="hidden">

            <button id="actualizarDireccion" class="btn-azul">Actualizar</button>
            <button class="btn-cerrar" data-close>Cancelar</button>
        </div>
    </div>
    <!-- ==========================================================
            MODAL — Agregar Dirección de Envío
    ========================================================== -->
    <div class="modal" id="modalAgregarDireccion">
        <div class="modal-content glass">
            <h3>Agregar dirección</h3>

            <input id="dirCalle" class="input-modal" placeholder="Calle y número">
            <input id="dirCiudad" class="input-modal" placeholder="Ciudad">

            <!-- Estado — SOLO MEXICANOS -->
            <select id="dirEstado" class="input-modal">
                <option value="">Seleccionar estado</option>
            </select>

            <input id="dirCP" class="input-modal" placeholder="Código Postal" maxlength="5">

            <button id="guardarDireccion" class="btn-azul">Guardar</button>
            <button class="btn-cerrar" data-close>Cancelar</button>
        </div>
    </div>


    <!-- ==========================================================
            MODAL — Editar Dirección de Envío
    ========================================================== -->
    <div class="modal" id="modalEditarDireccion">
        <div class="modal-content glass">
            <h3>Editar dirección</h3>

            <input id="editDirID" type="hidden">

            <input id="editDirCalle" class="input-modal">
            <input id="editDirCiudad" class="input-modal">

            <select id="editDirEstado" class="input-modal"></select>

            <input id="editDirCP" class="input-modal" maxlength="5">

            <button id="actualizarDireccion" class="btn-azul">Actualizar</button>
            <button class="btn-cerrar" data-close>Cancelar</button>
        </div>
    </div>


    <!-- ==========================================================
            LISTA DE DIRECCIONES
    ========================================================== -->
    <div class="perfil-card glass">
        <h2><i class="fa-solid fa-location-dot"></i> Direcciones de envío</h2>

        <div id="listaDirecciones" class="direccion-lista"></div>

        <button id="btnAgregarDireccion" class="btn-azul">
            <i class="fa-solid fa-circle-plus"></i> Añadir dirección
        </button>
    </div>


    <!-- SCRIPTS -->
    <script src="JS/navbar.js"></script>
    <script src="JS/perfil.js"></script>
    <script src="JS/wallet.js"></script>

</body>
</html>
