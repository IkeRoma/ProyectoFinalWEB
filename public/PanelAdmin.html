<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel Administrador - Vista Voyages</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Estilos -->
    <link rel="stylesheet" href="CSS/variables.css">
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="CSS/admin.css">
    <link rel="stylesheet" href="CSS/wallet.css">

    <!-- Iconos -->
    <script src="https://kit.fontawesome.com/a2e0f1f6e9.js" crossorigin="anonymous"></script>
</head>

<body class="perfil-body admin-body">

<div id="navTrigger"></div>

<!-- NAVBAR -->
<nav id="mainNav" class="nav">
    <div class="nav__brand">
        <img src="imagenes/logosinfondo.png" class="nav__logo" alt="Vista Voyages">
        <span class="nav__title">Vista Voyages</span>
    </div>
    <ul class="nav__links" data-nav="links"></ul>
</nav>

<script>
    const usr = JSON.parse(localStorage.getItem("usuario") || "null");
    if (!usr) window.location.href = "LogIn.html";
    if (usr && usr.Rol !== 1) {
        alert("Acceso restringido. Solo administradores.");
        window.location.href = "Index.html";
    }
</script>

<main class="admin-container">

    <!-- HEADER -->
    <section class="admin-header glass">
        <div>
            <h1>Panel de Administración</h1>
            <p>Bienvenido, <strong id="adminNombre"></strong></p>
        </div>
    </section>

    <!-- GRID PRINCIPAL -->
    <section class="admin-grid">

        <!-- ============================================= -->
        <!-- USUARIOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-users"></i> Usuarios</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroUsuarioId" placeholder="ID usuario">
                    <button class="btn-admin btn-edit" id="btnFiltrarUsuarios">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosUsuarios">Ver todos</button>
                </div>

                <button class="btn-action-big" onclick="abrirModalCrearUsuario()">+ Nuevo usuario</button>
            </div>

            <table class="admin-table">
                <thead>
                <tr>
                    <th>ID</th><th>Nombre</th><th>Correo</th><th>Rol</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody id="tablaUsuarios"></tbody>
            </table>
        </div>

        <!-- ============================================= -->
        <!-- WALLET -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-wallet"></i> Tarjetas (Wallet)</h2>
            </div>

            <!-- Vista en tarjetas corregida -->
            <div id="walletContainer"></div>
        </div>

        <!-- ============================================= -->
        <!-- AEROPUERTOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">

            <div class="admin-card-header">
                <h2><i class="fa-solid fa-earth-americas"></i> Aeropuertos / Destinos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroAeropuertoId" placeholder="ID aeropuerto">
                    <button class="btn-admin btn-edit" id="btnFiltrarAeropuertos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosAeropuertos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table">
                <thead>
                <tr>
                    <th>ID</th><th>Nombre</th><th>Ciudad</th><th>Estado</th><th>Activo</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody id="tablaAeropuertos"></tbody>
            </table>

            <form id="formAeropuerto" class="admin-form">
                <input type="hidden" id="aeropuertoId">

                <div>
                    <label>Nombre</label>
                    <input type="text" id="aeropuertoNombre" required>
                </div>

                <div>
                    <label>Ciudad</label>
                    <input type="text" id="aeropuertoCiudad" required>
                </div>

                <div>
                    <label>Estado</label>
                    <input type="text" id="aeropuertoEstado" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar aeropuerto</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- VUELOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-plane"></i> Vuelos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroVueloId" placeholder="ID vuelo">
                    <button class="btn-admin btn-edit" id="btnFiltrarVuelos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosVuelos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table">
                <thead>
                <tr>
                    <th>ID</th><th>Origen</th><th>Destino</th>
                    <th>Salida</th><th>Llegada</th><th>Escala</th><th>Activo</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody id="tablaVuelos"></tbody>
            </table>

            <form id="formVuelo" class="admin-form">
                <input type="hidden" id="vueloId">

                <div>
                    <label>ID Origen</label>
                    <input type="number" id="vueloOrigen" required>
                </div>

                <div>
                    <label>ID Destino</label>
                    <input type="number" id="vueloDestino" required>
                </div>

                <div>
                    <label>Fecha salida</label>
                    <input type="datetime-local" id="vueloFechaSalida" required>
                </div>

                <div>
                    <label>Fecha llegada</label>
                    <input type="datetime-local" id="vueloFechaLlegada" required>
                </div>

                <div>
                    <label>Escala</label>
                    <select id="vueloEscala">
                        <option value="DIRECTO">DIRECTO</option>
                        <option value="ESCALA">ESCALA</option>
                    </select>
                </div>

                <div>
                    <label>Núm. escalas</label>
                    <input type="number" id="vueloNumEscalas" min="0" value="0">
                </div>

                <button class="btn-action-big" type="submit">Guardar vuelo</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- ASIENTOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-chair"></i> Asientos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroAsientoId" placeholder="ID asiento">
                    <button class="btn-admin btn-edit" id="btnFiltrarAsientos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosAsientos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table">
                <thead>
                <tr>
                    <th>ID</th><th>Vuelo</th><th>Tipo</th><th>Precio</th><th>Stock</th><th>Activo</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody id="tablaAsientos"></tbody>
            </table>

            <form id="formAsiento" class="admin-form">
                <input type="hidden" id="asientoId">

                <div>
                    <label>ID vuelo</label>
                    <input type="number" id="asientoVuelo" required>
                </div>

                <div>
                    <label>Tipo</label>
                    <select id="asientoTipo">
                        <option value="BASICO">BASICO</option>
                        <option value="REGULAR">REGULAR</option>
                        <option value="PREMIUM">PREMIUM</option>
                    </select>
                </div>

                <div>
                    <label>Precio</label>
                    <input type="number" step="0.01" id="asientoPrecio" required>
                </div>

                <div>
                    <label>Stock</label>
                    <input type="number" id="asientoStock" min="0" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar asiento</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- EQUIPAJE VUELO -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-suitcase-rolling"></i> Equipaje Vuelo</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroEquipajeId" placeholder="ID equipaje">
                    <button class="btn-admin btn-edit" id="btnFiltrarEquipaje">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodoEquipaje">Ver todos</button>
                </div>
            </div>

            <table class="admin-table">
                <thead>
                <tr>
                    <th>ID</th><th>Vuelo</th><th>Tipo</th><th>Precio extra</th><th>Activo</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody id="tablaEquipaje"></tbody>
            </table>

            <form id="formEquipaje" class="admin-form">
                <input type="hidden" id="equipajeId">

                <div>
                    <label>ID vuelo</label>
                    <input type="number" id="equipajeVuelo" required>
                </div>

                <div>
                    <label>Tipo</label>
                    <select id="equipajeTipo">
                        <option value="C">C</option>
                        <option value="M">M</option>
                        <option value="G">G</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                    </select>
                </div>

                <div>
                    <label>Precio extra</label>
                    <input type="number" step="0.01" id="equipajePrecio" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar equipaje</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- TIPOS DE MALETA -->
        <!-- ============================================= -->
        <div class="admin-card glass">

            <div class="admin-card-header">
                <h2><i class="fa-solid fa-box"></i> Tipos de maleta (envío)</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroMaletaId" placeholder="ID tipo">
                    <button class="btn-admin btn-edit" id="btnFiltrarMaletas">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodasMaletas">Ver todos</button>
                </div>
            </div>

            <table class="admin-table">
                <thead>
                <tr>
                    <th>ID</th><th>Nombre</th><th>Peso máx.</th>
                    <th>Base</th><th>Tarifa extra/kg</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody id="tablaMaletas"></tbody>
            </table>

            <form id="formMaleta" class="admin-form">
                <input type="hidden" id="maletaId">

                <div>
                    <label>Nombre</label>
                    <input type="text" id="maletaNombre" required>
                </div>

                <div>
                    <label>Peso máximo (kg)</label>
                    <input type="number" step="0.1" id="maletaPesoMax" required>
                </div>

                <div>
                    <label>Precio base (MXN)</label>
                    <input type="number" step="0.01" id="maletaBase" required>
                </div>

                <div>
                    <label>Tarifa extra/kg (MXN)</label>
                    <input type="number" step="0.01" id="maletaTarifa" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar tipo de maleta</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- PEDIDOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">

            <div class="admin-card-header">
                <h2><i class="fa-solid fa-file-invoice"></i> Pedidos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroPedidoId" placeholder="ID pedido">
                    <button class="btn-admin btn-edit" id="btnFiltrarPedidos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosPedidos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table">
                <thead>
                <tr>
                    <th>ID</th><th>Usuario</th><th>Wallet</th>
                    <th>Total</th><th>Estado</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody id="tablaPedidos"></tbody>
            </table>

            <form id="formPedido" class="admin-form">
                <input type="hidden" id="pedidoId">

                <div>
                    <label>ID usuario</label>
                    <input type="number" id="pedidoUsuario" required>
                </div>

                <div>
                    <label>ID wallet</label>
                    <input type="number" id="pedidoWallet" required>
                </div>

                <div>
                    <label>Total (MXN)</label>
                    <input type="number" step="0.01" id="pedidoTotal" required>
                </div>

                <div>
                    <label>Estado</label>
                    <input type="text" id="pedidoEstado" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar pedido</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- PAGOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">

            <div class="admin-card-header">
                <h2><i class="fa-solid fa-money-check-dollar"></i> Pagos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroPagoId" placeholder="ID pago">
                    <button class="btn-admin btn-edit" id="btnFiltrarPagos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosPagos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table">
                <thead>
                <tr>
                    <th>ID</th><th>Usuario</th><th>Pedido</th>
                    <th>Monto</th><th>Estado</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody id="tablaPagos"></tbody>
            </table>

            <form id="formPago" class="admin-form">
                <input type="hidden" id="pagoId">

                <div>
                    <label>ID usuario</label>
                    <input type="number" id="pagoUsuario" required>
                </div>

                <div>
                    <label>ID pedido</label>
                    <input type="number" id="pagoPedido" required>
                </div>

                <div>
                    <label>Monto (MXN)</label>
                    <input type="number" step="0.01" id="pagoMonto" required>
                </div>

                <div>
                    <label>Estado</label>
                    <input type="text" id="pagoEstado" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar pago</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- BOLETOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-ticket"></i> Boletos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroBoletoId" placeholder="ID boleto">
                    <button class="btn-admin btn-edit" id="btnFiltrarBoletos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosBoletos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table">
                <thead>
                <tr>
                    <th>ID</th><th>Usuario</th><th>Vuelo</th>
                    <th>Asiento</th><th>Equipaje</th><th>Pedido</th>
                    <th>Precio</th><th>Estado</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody id="tablaBoletos"></tbody>
            </table>

            <form id="formBoleto" class="admin-form">
                <input type="hidden" id="boletoId">

                <div>
                    <label>ID usuario</label>
                    <input type="number" id="boletoUsuario" required>
                </div>

                <div>
                    <label>ID vuelo</label>
                    <input type="number" id="boletoVuelo" required>
                </div>

                <div>
                    <label>ID asiento</label>
                    <input type="number" id="boletoAsiento" required>
                </div>

                <div>
                    <label>ID equipaje (opcional)</label>
                    <input type="number" id="boletoEquipaje">
                </div>

                <div>
                    <label>ID pedido</label>
                    <input type="number" id="boletoPedido" required>
                </div>

                <div>
                    <label>Precio total (MXN)</label>
                    <input type="number" step="0.01" id="boletoPrecio" required>
                </div>

                <div>
                    <label>Estado</label>
                    <input type="text" id="boletoEstado" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar boleto</button>
            </form>
        </div>


        <!-- ============================================= -->
        <!-- MODALES USUARIOS -->
        <!-- ============================================= -->

        <div id="modalCrearUsuario" class="modalVV oculto">
            <div class="modalVV-content glass">
                <h2>Crear usuario</h2>

                <label>Nombre</label>
                <input id="crearNombre" class="input-modal" type="text">

                <label>Apellido</label>
                <input id="crearApellido" class="input-modal" type="text">

                <label>Correo</label>
                <input id="crearCorreo" class="input-modal" type="email">

                <label>Teléfono</label>
                <input id="crearTelefono" class="input-modal" type="text">

                <label>Rol</label>
                <select id="crearRol" class="input-modal">
                    <option value="0">Usuario</option>
                    <option value="1">Administrador</option>
                </select>

                <label>Contraseña</label>
                <input id="crearPassword" class="input-modal" type="password">

                <div class="modalVV-actions">
                    <button class="btnVV" onclick="guardarNuevoUsuario()">Guardar</button>
                    <button class="btnVV-cerrar" onclick="cerrarModalCrearUsuario()">Cerrar</button>
                </div>
            </div>
        </div>

        <div id="modalEditarUsuario" class="modalVV oculto">
            <div class="modalVV-content glass">
                <h2>Editar usuario</h2>

                <input type="hidden" id="editID">

                <label>Nombre</label>
                <input id="editNombre" class="input-modal" type="text">

                <label>Apellido</label>
                <input id="editApellido" class="input-modal" type="text">

                <label>Correo</label>
                <input id="editCorreo" class="input-modal" type="email">

                <label>Teléfono</label>
                <input id="editTelefono" class="input-modal" type="text">

                <label>Rol</label>
                <select id="editRol" class="input-modal">
                    <option value="0">Usuario</option>
                    <option value="1">Administrador</option>
                </select>

                <div class="modalVV-actions">
                    <button class="btnVV" onclick="guardarEdicionUsuario()">Guardar</button>
                    <button class="btnVV-cerrar" onclick="cerrarModalEditarUsuario()">Cerrar</button>
                </div>
            </div>
        </div>

    </section>
</main>

<!-- Scripts -->
<script src="JS/navbar.js"></script>
<script src="JS/admin.js"></script>
<script src="JS/wallet.js"></script>

</body>
</html>