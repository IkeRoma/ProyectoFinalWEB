<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel Administrador - Vista Voyages</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Estilos -->
    <link rel="stylesheet" href="CSS/variables.css">
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="CSS/admin.css">
    <link rel="stylesheet" href="CSS/wallet.css">

    <!-- Iconos -->
    <script src="https://kit.fontawesome.com/a2e0f1f6e9.js" crossorigin="anonymous"></script>
</head>

<body class="body-admin">

<nav id="mainNav" class="nav">
    <div class="nav__brand">
        <img src="imagenes/logosinfondo.png" class="nav__logo" alt="Vista Voyages">
        <span class="nav__title">Vista Voyages</span>
    </div>
    <ul class="nav__links" data-nav="links"></ul>
</nav>

<script>
    const usr = JSON.parse(localStorage.getItem("usuario") || "null");
    if (!usr) window.location.href = "LogIn.html";
    if (usr && usr.Rol !== 1) {
        alert("Acceso restringido. Solo administradores.");
        window.location.href = "Index.html";
    }
</script>

<main class="admin-main">
    <header class="admin-header">
        <h1>Panel de administración</h1>
        <p>Bienvenido, <span id="adminNombre"></span>. Gestiona usuarios, vuelos, asientos, equipaje y más.</p>
    </header>

    <section class="admin-grid">

        <!-- ============================================= -->
        <!-- USUARIOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-users"></i> Usuarios</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroUsuarioId" placeholder="ID usuario">
                    <button class="btn-admin btn-edit" id="btnFiltrarUsuarios">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosUsuarios">Ver todos</button>
                </div>

                <button 
                    class="btn-action-big" 
                    onclick="abrirModalCrearUsuario()">+ Nuevo usuario</button>
            </div>

            <table class="admin-table" id="tablaUsuarios">
                <thead>
                <tr>
                    <th>ID</th><th>Nombre</th><th>Correo</th><th>Rol</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- ============================================= -->
        <!-- WALLET -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-wallet"></i> Tarjetas (Wallet)</h2>
            </div>

            <!-- Vista en tabla para admin -->
            <table class="admin-table" id="tablaWallet">
                <thead>
                    <tr>
                        <th>ID tarjeta</th>
                        <th>Usuario</th>
                        <th>Tipo</th>
                        <th>BIN</th>
                        <th>Últimos 4</th>
                        <th>Expiración</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- ============================================= -->
        <!-- AEROPUERTOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">

            <div class="admin-card-header">
                <h2><i class="fa-solid fa-earth-americas"></i> Aeropuertos / Destinos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroAeropuertoId" placeholder="ID aeropuerto">
                    <button class="btn-admin btn-edit" id="btnFiltrarAeropuertos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosAeropuertos">Ver todos</button>
                </div>

                <button class="btn-action-big" onclick="resetFormAeropuerto()">+ Nuevo aeropuerto</button>
            </div>

            <table class="admin-table" id="tablaAeropuertos">
                <thead>
                <tr>
                    <th>ID</th><th>Nombre</th><th>Ciudad</th><th>Estado</th><th>Activo</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>

            <form id="formAeropuerto" class="admin-form">
                <input type="hidden" id="aeropuertoId">

                <div>
                    <label>Nombre</label>
                    <input type="text" id="aeropuertoNombre" required>
                </div>

                <div>
                    <label>Ciudad</label>
                    <input type="text" id="aeropuertoCiudad" required>
                </div>

                <div>
                    <label>Estado</label>
                    <input type="text" id="aeropuertoEstado" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar aeropuerto</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- VUELOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">

            <div class="admin-card-header">
                <h2><i class="fa-solid fa-plane"></i> Vuelos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroVueloId" placeholder="ID vuelo">
                    <button class="btn-admin btn-edit" id="btnFiltrarVuelos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosVuelos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table" id="tablaVuelos">
                <thead>
                <tr>
                    <th>ID</th><th>Origen</th><th>Destino</th>
                    <th>Salida</th><th>Llegada</th>
                    <th>Escala</th><th>Escalas</th>
                    <th>Activo</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>

            <form id="formVuelo" class="admin-form">
                <input type="hidden" id="vueloId">

                <div>
                    <label>Origen</label>
                    <select id="vueloOrigen" required></select>
                </div>

                <div>
                    <label>Destino</label>
                    <select id="vueloDestino" required></select>
                </div>

                <div>
                    <label>Fecha salida</label>
                    <input type="datetime-local" id="vueloFechaSalida" required>
                </div>

                <div>
                    <label>Fecha llegada</label>
                    <input type="datetime-local" id="vueloFechaLlegada" required>
                </div>

                <div>
                    <label>Escala</label>
                    <select id="vueloEscala">
                        <option value="DIRECTO">DIRECTO</option>
                        <option value="ESCALA">ESCALA</option>
                    </select>
                </div>

                <div>
                    <label>Núm. escalas</label>
                    <input type="number" id="vueloNumEscalas" min="0" value="0">
                </div>

                <button class="btn-action-big" type="submit">Guardar vuelo</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- ASIENTOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">

            <div class="admin-card-header">
                <h2><i class="fa-solid fa-chair"></i> Asientos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroAsientoId" placeholder="ID asiento">
                    <button class="btn-admin btn-edit" id="btnFiltrarAsientos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosAsientos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table" id="tablaAsientos">
                <thead>
                <tr>
                    <th>ID</th><th>Vuelo</th><th>Tipo</th><th>Precio</th><th>Stock</th><th>Activo</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>

            <form id="formAsiento" class="admin-form">
                <input type="hidden" id="asientoId">

                <div>
                    <label>Vuelo</label>
                    <select id="asientoVuelo" required></select>
                </div>

                <div>
                    <label>Tipo asiento</label>
                    <select id="asientoTipo">
                        <option value="BASICO">BÁSICO</option>
                        <option value="REGULAR">REGULAR</option>
                        <option value="PREMIUM">PREMIUM</option>
                    </select>
                </div>

                <div>
                    <label>Precio (MXN)</label>
                    <input type="number" step="0.01" id="asientoPrecio" required>
                </div>

                <div>
                    <label>Stock</label>
                    <input type="number" id="asientoStock" required min="0">
                </div>

                <button class="btn-action-big" type="submit">Guardar asiento</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- EQUIPAJE -->
        <!-- ============================================= -->
        <div class="admin-card glass">

            <div class="admin-card-header">
                <h2><i class="fa-solid fa-suitcase-rolling"></i> Equipaje por vuelo</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroEquipajeId" placeholder="ID equipaje">
                    <button class="btn-admin btn-edit" id="btnFiltrarEquipaje">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodoEquipaje">Ver todos</button>
                </div>
            </div>

            <table class="admin-table" id="tablaEquipaje">
                <thead>
                <tr>
                    <th>ID</th><th>Vuelo</th><th>Tipo</th><th>Precio extra</th><th>Activo</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>

            <form id="formEquipaje" class="admin-form">
                <input type="hidden" id="equipajeId">

                <div>
                    <label>Vuelo</label>
                    <select id="equipajeVuelo" required></select>
                </div>

                <div>
                    <label>Tipo</label>
                    <select id="equipajeTipo">
                        <option value="C">C (Cabina)</option>
                        <option value="M">M (Mediana)</option>
                        <option value="G">G (Grande)</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                    </select>
                </div>

                <div>
                    <label>Precio extra (MXN)</label>
                    <input type="number" step="0.01" id="equipajePrecio" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar equipaje</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- TIPOS DE MALETA ENVÍO -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-box"></i> Tipos de maleta (envío)</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroMaletaId" placeholder="ID tipo">
                    <button class="btn-admin btn-edit" id="btnFiltrarMaletas">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodasMaletas">Ver todos</button>
                </div>
            </div>

            <table class="admin-table" id="tablaMaletas">
                <thead>
                <tr>
                    <th>ID</th><th>Nombre</th><th>Peso máx.</th>
                    <th>Base</th><th>Tarifa extra/kg</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>

            <form id="formMaleta" class="admin-form">
                <input type="hidden" id="maletaId">

                <div>
                    <label>Nombre</label>
                    <input type="text" id="maletaNombre" required>
                </div>

                <div>
                    <label>Peso máximo (kg)</label>
                    <input type="number" step="0.1" id="maletaPesoMax" required>
                </div>

                <div>
                    <label>Precio base (MXN)</label>
                    <input type="number" step="0.01" id="maletaBase" required>
                </div>

                <div>
                    <label>Tarifa extra/kg (MXN)</label>
                    <input type="number" step="0.01" id="maletaTarifa" required>
                </div>

                <button class="btn-action-big" type="submit">Guardar tipo maleta</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- PEDIDOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-file-invoice"></i> Pedidos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroPedidoId" placeholder="ID pedido">
                    <button class="btn-admin btn-edit" id="btnFiltrarPedidos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosPedidos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table" id="tablaPedidos">
                <thead>
                <tr>
                    <th>ID</th><th>Usuario</th><th>Fecha</th><th>Total</th><th>Estado</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>

            <form id="formPedido" class="admin-form">
                <input type="hidden" id="pedidoId">

                <div>
                    <label>Estado</label>
                    <select id="pedidoEstado">
                        <option value="Pendiente">Pendiente</option>
                        <option value="Pagado">Pagado</option>
                        <option value="Cancelado">Cancelado</option>
                    </select>
                </div>

                <button class="btn-action-big" type="submit">Actualizar pedido</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- PAGOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-credit-card"></i> Pagos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroPagoId" placeholder="ID pago">
                    <button class="btn-admin btn-edit" id="btnFiltrarPagos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosPagos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table" id="tablaPagos">
                <thead>
                <tr>
                    <th>ID</th><th>Pedido</th><th>Método</th><th>Monto</th><th>Fecha</th><th>Estado</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>

            <form id="formPago" class="admin-form">
                <input type="hidden" id="pagoId">

                <div>
                    <label>Estado</label>
                    <select id="pagoEstado">
                        <option value="Autorizado">Autorizado</option>
                        <option value="Rechazado">Rechazado</option>
                        <option value="Pendiente">Pendiente</option>
                    </select>
                </div>

                <button class="btn-action-big" type="submit">Actualizar pago</button>
            </form>
        </div>

        <!-- ============================================= -->
        <!-- BOLETOS -->
        <!-- ============================================= -->
        <div class="admin-card glass">
            <div class="admin-card-header">
                <h2><i class="fa-solid fa-ticket"></i> Boletos</h2>

                <div class="admin-filters">
                    <input type="number" id="filtroBoletoId" placeholder="ID boleto">
                    <button class="btn-admin btn-edit" id="btnFiltrarBoletos">Filtrar</button>
                    <button class="btn-admin btn-delete" id="btnVerTodosBoletos">Ver todos</button>
                </div>
            </div>

            <table class="admin-table" id="tablaBoletos">
                <thead>
                <tr>
                    <th>ID</th><th>Usuario</th><th>Vuelo</th><th>Asiento</th>
                    <th>Equipaje</th><th>Estado</th><th>Código</th><th>Precio total</th><th>Acciones</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>

            <form id="formBoleto" class="admin-form">
                <input type="hidden" id="boletoId">

                <div>
                    <label>Estado</label>
                    <select id="boletoEstado">
                        <option value="Activo">Activo</option>
                        <option value="Usado">Usado</option>
                        <option value="Cancelado">Cancelado</option>
                        <option value="Pendiente">Pendiente</option>
                    </select>
                </div>

                <button class="btn-action-big" type="submit">Actualizar boleto</button>
            </form>
        </div>

    </section>
</main>

<!-- Scripts -->
<script src="JS/navbar.js"></script>
<script src="JS/admin.js"></script>
<script src="JS/wallet.js"></script>

</body>
</html>
